@if (currentDocument) {
<div class="info-detail-section">
  <div class="container">
    <div class="box-info-detail">
      <h2>Thông tin chi tiết</h2>
      <div class="group-info-detail">
        <div class="itemColumnInfo">
          <div class="img-itemColumnInfo">
            <p>
              <span class="leftSideBookSearch"></span>
              <img [src]="currentDocument.anhDaiDien" alt="" />
            </p>
          </div>
          <div class="img-itemColumnInfo">
            <h3 [nzTooltipTitle]="currentDocument.tieuDe" nzTooltipPlacement="bottomCenter" nz-button nz-tooltip>
              {{currentDocument.tieuDe}}</h3>
            <app-preview-document class="fixHeight" [details]="currentDocument.tomTat" />
            <div class="box-btn-info">
              <button class="btn btn-read" (click)="showModal()"><i class="fa fa-folder-open"></i> Đọc sách</button>
              <button class="btn btn-read"><i class="fa fa-solid fa-book"></i> Mượn sách</button>
            </div>
            <div class="box-love-book">
              <button class="btn btn-love-book" (click)="toggleFavorite()">
                <i [ngClass]="currentDocument.laTaiLieuQuanTam === 1 ? 'fa fa-heart text-danger' : 'fa fa-regular fa-heart'"></i>
                {{ currentDocument.laTaiLieuQuanTam === 1 ? 'Bỏ yêu thích' : 'Yêu thích' }}
              </button>
            </div>            
          </div>
        </div>
        <div class="itemColumnInfo">
          <div class="info-author">
            <div class="box-profile">
              <ul>
                <li *ngIf="getPropertyValue(currentDocument, 'tacGia[0].giaTri')">Tác giả: <a
                    [routerLink]="['/documents/author', currentDocument.tacGia[0].giaTri]">{{currentDocument.tacGia[0].giaTri}}</a>
                </li>
                <li *ngIf="currentDocument.thongTinXuatBan">Năm xuất bản:
                  <span>{{currentDocument.thongTinXuatBan}}</span>
                </li>
                <li>Nhà xuất bản: <a href="#">Room to Red</a></li>
                <li>Bộ sách: <a href="#">Cánh diều</a></li>
                <li>Nơi lưu trữ: <span>Sách thiếu nhi (3): STN000001-03</span></li>
              </ul>
            </div>
            <div class="box-profile pt-5">
              <ul class="nav_social">
                <li>
                  <i class="fa fa-regular fa-heart"></i>
                  <span>{{currentDocument.slXem}}</span>
                </li>
                <li>
                  <i class="fa fa-solid fa-book"></i>
                  <span>{{currentDocument.slBanSo}}</span>
                </li>
                <li>
                  <i class="fa fa-solid fa-book"></i>
                  <span>{{currentDocument.slBanIn}}</span>
                </li>
                <li>
                  <i class="fa fa-solid fa-share"></i>
                  <span>50</span>
                </li>
                <li>
                  <i class="fa fa-solid fa-comment"></i>
                  <span>50</span>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    @let docs$ = docs | async;
    @if (docs$) {
    <div class="box-stand pt-5">
      <div class="container pdlr0">
        <app-s-slider [children]="maybeYouLike" title="Có thể bạn thích" [data]="docs$"></app-s-slider>
        <ng-template #maybeYouLike let-item="item">
          <app-book-item-slider [book]="item" />
        </ng-template>
      </div>
    </div>
    }
  </div>
</div>

<nz-modal
  nzWidth="auto"
  [(nzVisible)]="isVisible"
  nzTitle="Xem tài liệu"
  [nzFooter]="null"
  [nzStyle]="{ top: '20px' }"
  (nzOnCancel)="handleCancel()"
>
  <ng-container *nzModalContent>
    <div class="modal-layout">
      <!-- Left menu: Danh sách mục lục tài liệu -->
      <div class="left-menu">
        <ul>
          <ng-container *ngFor="let item of treeStructure">
            <ng-container *ngTemplateOutlet="treeNode; context: { $implicit: item, level: 0 }"></ng-container>
          </ng-container>
        </ul>
        <!-- Recursive template for tree nodes -->
        <ng-template #treeNode let-node let-level="level">
          <li
            (click)="selectSection(node)"
            [class.active]="node === selectedSection"
            [style.padding-left]="level * 20 + 'px'"
          >
            {{ node.tieuDe || 'Mục không tên' }}
          </li>
          <ul *ngIf="node.children">
            <ng-container *ngFor="let child of node.children">
              <ng-container *ngTemplateOutlet="treeNode; context: { $implicit: child, level: level + 1 }"></ng-container>
            </ng-container>
          </ul>
        </ng-template>
      </div>

      <!-- Right content: Nội dung mục lục -->
      <div class="content-area">
        <iframe
          *ngIf="selectedSection?.tepTinTen"
          [src]="selectedSection.tepTinTen | safeUrl"
          width="100%"
          height="100%"
          style="border: none;"
        ></iframe>
        <p *ngIf="!selectedSection?.tepTinTen">
          Chọn mục bên trái để xem nội dung.
        </p>
      </div>
    </div>
  </ng-container>
</nz-modal>

}



<!-- <app-s-slider title="Sách giáo khoa1" [data]="docs$"></app-s-slider> -->