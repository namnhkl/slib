<nz-spin [nzSpinning]="isLoading" [nzDelay]="500">
  <main class=" max-w-[1200px] mx-auto px-4 sm:px-6 lg:px-8 pt-10 pb-16">
    <!-- Header cải tiến -->
    <section class="relative bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-8 text-center shadow mb-10">
      <!-- Icon + tiêu đề -->
      <div class="flex flex-col items-center justify-center space-y-2">
        <div class="bg-[#004aad] text-white w-14 h-14 flex items-center justify-center rounded-full shadow-md mb-2">
          <i class="fa-solid fa-image text-xl"></i>
        </div>
        <h1 class="text-3xl sm:text-4xl font-bold text-gray-800 tracking-tight">
          {{ 'thu_vien_anh' | translate }}
        </h1>
      </div>
    </section>

    <!-- Main layout -->
    <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
      
      <!-- Sidebar: Danh sách album -->
      <aside class="col-span-1 bg-white border border-gray-200 rounded-2xl p-4 shadow-md max-h-[700px] overflow-y-auto">
        <h2 class="text-lg font-semibold text-blue-700 mb-4">
          <i class="fa-solid fa-folder-open mr-2 text-blue-500"></i>
          {{ 'album' | translate }}
        </h2>

        <div *ngFor="let album of albums"
             (click)="onAlbumSelect(album)"
             class="cursor-pointer flex items-start gap-3 p-3 rounded-xl border border-gray-200 hover:shadow transition duration-200 mb-3"
             [class.bg-blue-100]="album.id === selectedAlbumId">
          <img [src]="album.anhDaiDien"
               class="w-16 h-16 object-cover rounded-lg border"
               alt="cover" />
          <div class="flex-1">
            <h4 class="text-sm font-medium text-gray-800 line-clamp-1">
              <i class="fa-solid fa-photo-film mr-1 text-gray-500"></i>{{ album.ten }}
            </h4>
            <p class="text-xs text-gray-500">
              <i class="fa-regular fa-calendar-days mr-1"></i>{{ album.ngayXuatBan }}
            </p>
            <p class="text-xs text-gray-500">
              <i class="fa-solid fa-align-left mr-1"></i>{{ album.moTa }}
            </p>
          </div>
        </div>

        <!-- Pagination -->
        <div class="flex justify-center mt-6">
          <nz-pagination
            [nzPageIndex]="currentPage + 1"
            [nzTotal]="totalCount"
            [nzPageSize]="pageSize"
            (nzPageIndexChange)="onPageIndexChange($event)"
            [nzShowSizeChanger]="false"
            [nzShowQuickJumper]="false"
            nzSize="small">
          </nz-pagination>
        </div>
      </aside>

      <!-- Gallery: Thư viện ảnh -->
      <section class="col-span-3 bg-white p-4 min-h-[500px] rounded-2xl shadow-md flex flex-col">
        <h4 class="text-lg font-semibold text-blue-700 mb-4 flex items-center gap-2">
  <i class="fa-solid fa-server text-blue-500"></i>
  {{ 'xem_anh_chi_tiet' | translate }}
  <span *ngIf="selectedAlbumName" class="text-sm text-gray-600 font-normal italic">
    - {{ selectedAlbumName }}
  </span>
</h4>


        <div class="flex-1 overflow-hidden rounded-lg border border-gray-300">
          <ngx-image-gallery
            class="mt-6"
            [images]="images"
            [conf]="conf"
            (onOpen)="galleryOpened($event)"
            (onClose)="galleryClosed()"
            (onImageClicked)="galleryImageClicked($event)"
            (onImageChange)="galleryImageChanged($event)"
            (onDelete)="deleteImage($event)">
          </ngx-image-gallery>
        </div>
      </section>
    </div>
  </main>
</nz-spin>
